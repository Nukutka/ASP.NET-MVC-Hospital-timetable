@using Test.Models
@model IndexParamsModel
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <link rel="stylesheet" href="~/Content/MyStyles/my-styles.css">
    <title>Запись к врачу</title>
</head>
<body>
    <div class="row">
        <div class="col-md-3">
            <h3>Дата записи</h3>
            <div>
                <form method="post" action="/Home/SelectDoctor">
                    <input type="date" width="200" name="calendar" value="@ViewBag.CalendarDate"><br /><br />
                    <div class="scrollable-list">
                        @foreach (var doc in Model.Doctors)
                        {
                            <div class="horizontal-line"></div>
                            if (Model.SelectedDoctors.Contains(doc))
                            {
                                <input type="checkbox" name="doctor" value="@doc.Id" checked />@doc.ToString()
                            }
                            else
                            {
                                <input type="checkbox" name="doctor" value="@doc.Id" />@doc.ToString()
                            }
                        }
                    </div>
                    <br />
                    <input type="reset" value="Сбросить" />
                    <input type="submit" value="Выбрать" />
                </form>
            </div>
        </div>
        <div class="col-md-9">
            <div class="row">
                <h3>Расписание специалисов</h3>
                @foreach (var doc in Model.SelectedDoctors)
                {
                    <div class="col-md-2">
                        <table class="table table-condensed table-bordered">
                            <tr>
                                <td>
                                    Специалист
                                    <br />
                                    @doc.ToString()
                                    <br />
                                    @Model.SelectedDate.ToShortDateString()
                                </td>
                                @{ if (doc.TimeTables.FirstOrDefault(x => x.Date == Model.SelectedDate) != null)
                                    {
                                        foreach (var c in doc.TimeTables.First(x => x.Date == Model.SelectedDate).Cells)
                                        {
                                            if (c.IsEmpty)
                                            {
                                               
                                            <tr><td bgcolor="#76e397">@Html.ActionLink(c.Time.ToShortTimeString(), "Record", "Home", new { docId = doc.Id, cellId = c.Id, selDate = Model.SelectedDate}, null)</td></tr>
                                        }
                                        else
                                        {
                                            <tr><td bgcolor="#e37676">@c.Time.ToShortTimeString()</td></tr>
                                        }
                                    }
                                }
                                }
                            </table>
                        </div>
                    }
            </div>
        </div>
    </div>
    @section scripts {
        @Scripts.Render("~/Scripts/MyScripts/blockCheckBox.js")
    }
</body>
</html>